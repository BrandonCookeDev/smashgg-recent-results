{
"AWSTemplateFormatVersion": "2010-09-09",
	"Description": "",
	"Metadata": {

	},
	"Parameters": {
		"redisTTL":{
			"Type": "String",
			"Default": ""
		}
	},
	"Mappings": {

	},
	"Conditions": {

	},
	"Resources": {
		
		"elasticacheSecurityGroup": {
		  "Type": "AWS::ElastiCache::SecurityGroup",
		  "Properties":
		  {
			"Description": "SG for smashgg-recently-finished-games app"
		  }
		},
		
		"redisCacheCluster": {
		   "Type": "AWS::ElastiCache::CacheCluster",
		   "Properties":
		   {
			  "AutoMinorVersionUpgrade": "true",
			  "CacheNodeType": "t2.micro",
			  "CacheParameterGroupName": "",
			  "CacheSecurityGroupNames": [ "" ],
			  "CacheSubnetGroupName": "smashgg-recently-finished-games",
			  "ClusterName": "smashgg-recent-games",
			  "Engine": "redis",
			  "EngineVersion": "4.0.10",
			  "NumCacheNodes": "1",
			  "Port": "6379",
			  "PreferredAvailabilityZone": "",
			  "PreferredAvailabilityZones": [ "" ],
			  "PreferredMaintenanceWindow": "",
			  "SnapshotArns": ["" ],
			  "SnapshotRetentionLimit": "",
			  "SnapshotWindow": "",
			  "VpcSecurityGroupIds": [ 
				  { "Ref": "elasticacheSecurityGroup" } 
				]
		   }
		},
		
		
		"lambdaRole": {
		   "Type": "AWS::IAM::Role",
		   "Properties": {
			  "AssumeRolePolicyDocument": { 

			   },
			  "Path": "",
			  "Policies": [ 
				{
					
				}
			   ]
		   }
		},
		
		"lambdaFunction": {
		  "Type": "AWS::Lambda::Function",
		  "Properties": {
			"Code": {
			  "S3Bucket": "",
			  "S3Key": "",
			  "S3ObjectVersion": "",
			  "ZipFile": ""
			},
			"Handler": "main.handler",
			"Role": { "Ref": "lambdaRole" },
			"Runtime": "Node8.10",
			"FunctionName": "smashgg-recently-finished-sets",
			"MemorySize": 128,
			"Timeout": 5,
			"KmsKeyArn": "",
			"Environment": {
			  "Variables": {
				"redisUrl": { 
					"Fn::GetAtt": [
						"redisCacheCluster",
						"RedisEndpoint.Address"
					]	
				},
				"redisPort": {
					"Fn::GetAtt": [
						"redisCacheCluster",
						"RedisEndpoint.Port"
					]
				},
				"redisTTL": { "Ref": "redisTTL" }
			  }
			},
			"VpcConfig": {
			  "SecurityGroupIds": [ ],
			  "SubnetIds": [ ]
			},
			"Description": "Lambda function to fetch sets that were recently completed in a smashgg tournament or event"
		  }
		}
		
	},
	"Outputs": {

	}
}